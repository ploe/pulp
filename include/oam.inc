	IF !DEF(_PULP_OAM_INC)
_PULP_OAM_INC SET 1

TILE_SIZE EQU 16

; Struct for Sprite
RSRESET
SPRITE_OFFSET RB 0
SPRITE_Y RB 1
SPRITE_X RB 1
SPRITE_ATTRIBUTES RB 0
SPRITE_TILE RB 1
SPRITE_FLAGS RB 1
SPRITE_OAM_OBJECT_SIZE RB 0
SPRITE_FRAME RW 1
SPRITE_INTERVAL RB 1
SPRITE_TILE_DST RW 1
SPRITE_TILE_SRC RW 1
SPRITE_BANK RW 1
SPRITE_OAM_BUFFER RW 1
SPRITE_STATUS RB 1
SPRITE_SIZE RB 0

; Sprite flags
SPRITE_FLAG_UPDATED EQU 0

; Constants
SPRITE_BANK_TOTAL EQU 14
SPRITE_BANK_SIZE EQU (TILE_SIZE * SPRITE_BANK_TOTAL)

RSRESET
SPRITE_BUFFER_TOP RB 1
SPRITE_BUFFER_FLAGS RB 1
SPRITE_BUFFER_DATA RB SPRITE_BANK_SIZE
SPRITE_BUFFER_SIZE RB 0

; Flags
SPRITE_BUFFER_FLAG_REFRESH EQU 0

OAM_LIMIT EQU 40

OAM_SPRITE_REQUEST: MACRO
; Return address of Sprite Buffer starts
; \1 ~> Size
; de <~ Sprite_Top address
	ld hl, \1 * SPRITE_OAM_OBJECT_SIZE
	call Oam_Request

	ENDM

ENDC
